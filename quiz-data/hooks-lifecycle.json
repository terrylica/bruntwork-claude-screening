{
  "title": "Claude Code Hooks Lifecycle Assessment",
  "description": "Assessment covering Claude Code hooks architecture, lifecycle events, blocking mechanisms, and implementation best practices for virtual assistant candidates.",
  "isQuiz": true,
  "domain": "Hooks & Automation",
  "weight": 0.20,
  "questions": [
    {
      "questionNumber": 0,
      "questionText": "What is the primary purpose of Claude Code hooks?",
      "type": "multiple_choice",
      "required": true,
      "options": [
        "To replace Claude's built-in tools with custom implementations",
        "To execute shell commands at specific lifecycle events for validation, automation, and control",
        "To modify Claude's underlying language model behavior",
        "To disable Claude Code's security features"
      ],
      "correctAnswerIndex": 1,
      "correctAnswer": "To execute shell commands at specific lifecycle events for validation, automation, and control",
      "explanation": "Hooks are user-defined shell commands that execute automatically at specific points in Claude Code's lifecycle. They provide deterministic control for validation, automation, blocking dangerous operations, and injecting context.",
      "citations": {
        "correctAnswer": [
          {
            "source": {
              "type": "documentation",
              "title": "Claude Code Hooks Reference",
              "url": "https://code.claude.com/docs/en/hooks",
              "section": "Hook lifecycle",
              "accessDate": "2026-01-24"
            },
            "authority": {
              "tier": 1,
              "organization": "Anthropic",
              "confidence": 0.98
            },
            "quotedText": "Hooks fire at specific points during a Claude Code session."
          }
        ]
      }
    },
    {
      "questionNumber": 1,
      "questionText": "When does the UserPromptSubmit hook fire?",
      "type": "multiple_choice",
      "required": true,
      "options": [
        "After Claude processes the prompt",
        "When you submit a prompt, BEFORE Claude processes it",
        "When Claude finishes responding",
        "When the session ends"
      ],
      "correctAnswerIndex": 1,
      "correctAnswer": "When you submit a prompt, BEFORE Claude processes it",
      "explanation": "UserPromptSubmit fires when the user presses Enter, before Claude begins processing. This allows validation, capture, or blocking of prompts.",
      "citations": {
        "correctAnswer": [
          {
            "source": {
              "type": "documentation",
              "title": "Claude Code Hooks Reference",
              "url": "https://code.claude.com/docs/en/hooks",
              "onlineUrl": "https://code.claude.com/docs/en/hooks",
              "section": "UserPromptSubmit",
              "accessDate": "2026-01-24"
            },
            "authority": {
              "tier": 1,
              "organization": "Anthropic",
              "confidence": 0.98
            },
            "quotedText": "Runs when the user submits a prompt, before Claude processes it. This allows you to add additional context based on the prompt/conversation, validate prompts, or block certain types of prompts."
          }
        ]
      }
    },
    {
      "questionNumber": 2,
      "questionText": "Which hooks CAN block execution (prevent an action from proceeding)?",
      "type": "multiple_choice",
      "required": true,
      "options": [
        "Only PreToolUse and PostToolUse",
        "UserPromptSubmit, PreToolUse, PermissionRequest, PostToolUse, PostToolUseFailure, SubagentStop, and Stop",
        "All hook types can block",
        "Only Stop and SessionEnd"
      ],
      "correctAnswerIndex": 1,
      "correctAnswer": "UserPromptSubmit, PreToolUse, PermissionRequest, PostToolUse, PostToolUseFailure, SubagentStop, and Stop",
      "explanation": "These hooks can block: UserPromptSubmit (hard), PreToolUse (hard), PermissionRequest (hard), PostToolUse (soft - tool already ran), PostToolUseFailure (soft - tool already failed), SubagentStop (hard), and Stop (hard). SessionStart, PreCompact, Notification, and SessionEnd cannot block.",
      "citations": {
        "correctAnswer": [
          {
            "source": {
              "type": "documentation",
              "title": "Claude Code Hooks Reference",
              "url": "https://code.claude.com/docs/en/hooks",
              "onlineUrl": "https://code.claude.com/docs/en/hooks",
              "section": "Exit Code 2 Behavior",
              "accessDate": "2026-01-24"
            },
            "authority": {
              "tier": 1,
              "organization": "Anthropic",
              "confidence": 0.95
            },
            "quotedText": "Exit code 2: Blocking error. Only stderr is used as the error message and fed back to Claude. PreToolUse: Blocks the tool call, shows stderr to Claude. UserPromptSubmit: Blocks prompt processing, erases prompt. Stop: Blocks stoppage, shows stderr to Claude."
          }
        ]
      }
    },
    {
      "questionNumber": 3,
      "questionText": "How do hooks receive their input data?",
      "type": "multiple_choice",
      "required": true,
      "options": [
        "Via environment variables like $TOOL_NAME and $COMMAND",
        "Via command-line arguments",
        "Via stdin as a JSON object",
        "Via a configuration file"
      ],
      "correctAnswerIndex": 2,
      "correctAnswer": "Via stdin as a JSON object",
      "explanation": "All hooks receive their input via stdin as a JSON object containing session_id, transcript_path, cwd, and event-specific data. Environment variables like CLAUDE_PROJECT_DIR are available but not used for input data.",
      "citations": {
        "correctAnswer": [
          {
            "source": {
              "type": "documentation",
              "title": "Claude Code Hooks Reference",
              "url": "https://code.claude.com/docs/en/hooks",
              "onlineUrl": "https://code.claude.com/docs/en/hooks",
              "section": "Hook Input",
              "accessDate": "2026-01-24"
            },
            "authority": {
              "tier": 1,
              "organization": "Anthropic",
              "confidence": 0.98
            },
            "quotedText": "Hooks receive JSON data via stdin containing session information and event-specific data: { session_id: string, transcript_path: string, cwd: string, permission_mode: string, hook_event_name: string, ... }"
          }
        ]
      }
    },
    {
      "questionNumber": 4,
      "questionText": "What is the CORRECT way to reference a hook script in settings.json?",
      "type": "multiple_choice",
      "required": true,
      "options": [
        "\"command\": \"uv run $HOME/.claude/hooks/script.py\"",
        "\"command\": \"python3 $HOME/.claude/hooks/script.py\"",
        "\"command\": \"$HOME/.claude/hooks/script.py\"",
        "\"command\": \"./hooks/script.py\""
      ],
      "correctAnswerIndex": 2,
      "correctAnswer": "\"command\": \"$HOME/.claude/hooks/script.py\"",
      "explanation": "Hooks must use direct executable paths. Use CLAUDE_PROJECT_DIR for project-relative scripts. The script must have a shebang and be executable (chmod +x).",
      "citations": {
        "correctAnswer": [
          {
            "source": {
              "type": "documentation",
              "title": "Claude Code Hooks Reference",
              "url": "https://code.claude.com/docs/en/hooks",
              "onlineUrl": "https://code.claude.com/docs/en/hooks",
              "section": "Project-Specific Hook Scripts",
              "accessDate": "2026-01-24"
            },
            "authority": {
              "tier": 1,
              "organization": "Anthropic",
              "confidence": 0.95
            },
            "quotedText": "You can use the environment variable CLAUDE_PROJECT_DIR (only available when Claude Code spawns the hook command) to reference scripts stored in your project, ensuring they work regardless of Claude's current directory."
          }
        ]
      }
    },
    {
      "questionNumber": 5,
      "questionText": "When does PostToolUse hook fire?",
      "type": "multiple_choice",
      "required": true,
      "options": [
        "Only when a tool throws an unhandled exception",
        "After a tool completes successfully ONLY (NOT on errors)",
        "Before a tool executes, to validate parameters",
        "Immediately after the user grants permission"
      ],
      "correctAnswerIndex": 1,
      "correctAnswer": "After a tool completes successfully ONLY (NOT on errors)",
      "explanation": "PostToolUse ONLY fires after successful tool completion. For failed tools, use PostToolUseFailure hook instead.",
      "citations": {
        "correctAnswer": [
          {
            "source": {
              "type": "documentation",
              "title": "Claude Code Hooks Reference",
              "url": "https://code.claude.com/docs/en/hooks",
              "onlineUrl": "https://code.claude.com/docs/en/hooks",
              "section": "PostToolUse",
              "accessDate": "2026-01-24"
            },
            "authority": {
              "tier": 1,
              "organization": "Anthropic",
              "confidence": 0.98
            },
            "quotedText": "PostToolUse: Runs immediately after a tool completes successfully. PostToolUseFailure: After tool fails."
          }
        ]
      }
    },
    {
      "questionNumber": 6,
      "questionText": "For PostToolUse hooks, what is required for Claude to see your message?",
      "type": "multiple_choice",
      "required": true,
      "options": [
        "Output {\"reason\": \"your message\"}",
        "Output {\"additionalContext\": \"your message\"}",
        "Output {\"decision\": \"block\", \"reason\": \"your message\"}",
        "Write to stdout with plain text"
      ],
      "correctAnswerIndex": 2,
      "correctAnswer": "Output {\"decision\": \"block\", \"reason\": \"your message\"}",
      "explanation": "PostToolUse requires 'decision: block' for Claude to see the reason - but this does NOT actually block anything since the tool already ran. Use additionalContext for supplementary info.",
      "citations": {
        "correctAnswer": [
          {
            "source": {
              "type": "documentation",
              "title": "Claude Code Hooks Reference",
              "url": "https://code.claude.com/docs/en/hooks",
              "onlineUrl": "https://code.claude.com/docs/en/hooks",
              "section": "PostToolUse Decision Control",
              "accessDate": "2026-01-24"
            },
            "authority": {
              "tier": 1,
              "organization": "Anthropic",
              "confidence": 0.98
            },
            "quotedText": "'block' automatically prompts Claude with reason. undefined does nothing. reason is ignored. hookSpecificOutput.additionalContext adds context for Claude to consider."
          }
        ]
      }
    },
    {
      "questionNumber": 7,
      "questionText": "What is the RECOMMENDED execution time for hooks to ensure responsive UX? (Note: Official timeout is 60 seconds)",
      "type": "multiple_choice",
      "required": true,
      "options": [
        "Under 1 second",
        "Under 100 milliseconds (best practice)",
        "Under 5 seconds",
        "60 seconds (official timeout)"
      ],
      "correctAnswerIndex": 1,
      "correctAnswer": "Under 100 milliseconds (best practice)",
      "explanation": "While the official timeout is 60 seconds, best practice is <100ms for responsive UX. Long-running hooks degrade user experience with noticeable delays.",
      "citations": {
        "correctAnswer": [
          {
            "source": {
              "type": "documentation",
              "title": "Claude Code Hooks Reference",
              "url": "https://code.claude.com/docs/en/hooks",
              "onlineUrl": "https://code.claude.com/docs/en/hooks",
              "section": "Hook Execution Details",
              "accessDate": "2026-01-24"
            },
            "authority": {
              "tier": 1,
              "organization": "Anthropic",
              "confidence": 0.95
            },
            "quotedText": "Timeout: 60-second execution limit by default, configurable per command. A timeout for an individual command does not affect the other commands."
          }
        ]
      }
    },
    {
      "questionNumber": 8,
      "questionText": "What does exit code 2 mean in a hook script?",
      "type": "multiple_choice",
      "required": true,
      "options": [
        "Success - allow the action",
        "Non-blocking error",
        "Hard block - cannot be bypassed",
        "Soft block - user can override"
      ],
      "correctAnswerIndex": 2,
      "correctAnswer": "Hard block - cannot be bypassed",
      "explanation": "Exit code 2 is a blocking error. Exit 0 is success (JSON output processed), and other exit codes are non-blocking errors shown in verbose mode.",
      "citations": {
        "correctAnswer": [
          {
            "source": {
              "type": "documentation",
              "title": "Claude Code Hooks Reference",
              "url": "https://code.claude.com/docs/en/hooks",
              "onlineUrl": "https://code.claude.com/docs/en/hooks",
              "section": "Simple: Exit Code",
              "accessDate": "2026-01-24"
            },
            "authority": {
              "tier": 1,
              "organization": "Anthropic",
              "confidence": 0.98
            },
            "quotedText": "Exit code 0: Success. Exit code 2: Blocking error. Only stderr is used as the error message and fed back to Claude. JSON in stdout is NOT processed for exit code 2. Other exit codes: Non-blocking error."
          }
        ]
      }
    },
    {
      "questionNumber": 9,
      "questionText": "In Stop hooks, what does {\"continue\": false} actually do?",
      "type": "multiple_choice",
      "required": true,
      "options": [
        "Allows Claude to stop normally",
        "Prevents Claude from stopping (forces continuation)",
        "Halts Claude entirely (emergency stop)",
        "Has no effect"
      ],
      "correctAnswerIndex": 2,
      "correctAnswer": "Halts Claude entirely (emergency stop)",
      "explanation": "continue: false stops Claude from processing after hooks run. To allow normal stop, output {}. To force continuation, use {\"decision\": \"block\", \"reason\": \"...\"}.",
      "citations": {
        "correctAnswer": [
          {
            "source": {
              "type": "documentation",
              "title": "Claude Code Hooks Reference",
              "url": "https://code.claude.com/docs/en/hooks",
              "onlineUrl": "https://code.claude.com/docs/en/hooks",
              "section": "Stop/SubagentStop Decision Control",
              "accessDate": "2026-01-24"
            },
            "authority": {
              "tier": 1,
              "organization": "Anthropic",
              "confidence": 0.98
            },
            "quotedText": "If continue is false, Claude stops processing after the hooks run. 'block' prevents Claude from stopping. You must populate reason for Claude to know how to proceed. undefined allows Claude to stop."
          }
        ]
      }
    }
  ]
}
