---
# Only the main Sass file needs front matter (the dashes are enough)
---

@charset "utf-8";

@import "minimal-mistakes/skins/{{ site.minimal_mistakes_skin | default: 'default' }}";
@import "minimal-mistakes";

// ============================================
// FULL-WIDTH LAYOUT - NUCLEAR OPTION
// Use html body prefix for highest specificity
// ============================================

html body {
  // Remove all max-width constraints
  #main,
  .initial-content,
  .page,
  .archive,
  .page__inner-wrap,
  .page__content,
  .masthead,
  .masthead__inner-wrap {
    max-width: none !important;
    width: 100% !important;
  }

  #main {
    padding-left: 2em !important;
    padding-right: 2em !important;
  }

  // Hide left sidebar
  .sidebar:not(.sidebar__right) {
    display: none !important;
  }

  // TOC - collapsible floating panel
  .sidebar__right {
    position: fixed !important;
    top: 70px !important;
    right: 20px !important;
    width: 280px !important;
    max-height: 80vh !important;
    overflow-y: auto !important;
    z-index: 100 !important;
    float: none !important;
    margin: 0 !important;
    background: #1f242c !important;
    border-radius: 8px !important;
    box-shadow: 0 4px 20px rgba(0,0,0,0.4) !important;
  }

  // TOC header - clickable to collapse
  .toc {
    .nav__title {
      cursor: pointer;
      padding: 0.75em 1em !important;
      margin: 0 !important;
      background: #3b8a8c !important;
      border-radius: 8px 8px 0 0 !important;
      font-size: 0.9em !important;

      &::after {
        content: " ▼";
        font-size: 0.7em;
      }
    }

    // TOC menu - collapsible
    .toc__menu {
      max-height: 60vh;
      overflow-y: auto;
      padding: 0.5em 1em 1em !important;
      transition: max-height 0.3s ease, padding 0.3s ease;
    }

    // Collapsed state (add via JS or use details/summary)
    &.collapsed {
      .nav__title::after {
        content: " ▶";
      }
      .toc__menu {
        max-height: 0 !important;
        padding: 0 1em !important;
        overflow: hidden !important;
      }
    }
  }

  // Smaller text in TOC for dense content
  .toc__menu {
    font-size: 0.8em !important;

    a {
      padding: 0.3em 0 !important;
      display: block;
    }

    li {
      margin-bottom: 0.2em !important;
    }
  }
}
